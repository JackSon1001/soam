<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<script src="/chart/js/echarts.common.min.js"></script>
	<script src="/chart/resource/jquery/3.1.0/jquery-3.1.0.min.js"></script>
</head>
<body>
	<div id="main" style="width: 600px;height:600px;"></div>
	<script type="text/javascript">
		var myChart = echarts.init(document.getElementById('main'));
		myChart.setOption({
			title : {
				text: 'SOA服务请求统计',
		        subtext: '真实数据，即时查询',
				x: 'center'
			},
			tooltip: {
				trigger: 'item',
				formatter: "{a} <br/>{b} : {c} ({d}%)"
			},
			legend: {
				orient: 'vertical',
				left: 'left',
				data: ['营销系统','生产系统','财务系统','人资系统','物资系统','数据管理','GIS','其他']
			},
			series : [
				{
					name: '所属微服务',
					type: 'pie',
					radius : '60%',
					center: ['50%', '53%'],
					data:[
					],
					itemStyle: {
						emphasis: {
							shadowBlur: 10,
							shadowOffsetX: 0,
							shadowColor: 'rgba(0, 0, 0, 0.5)'
						}
					}
				}
			]
		});

		$.ajax({
			type: "GET",
			url: "/chart/log/chart3",
			contentType: "application/json",
			dataType : "json",
			beforeSend : function( XHR ){
				myChart.showLoading();
			},
			complete : function( XHR, status ){
				myChart.hideLoading();
			},
			success: function( data ){
				myChart.setOption({
					series : [
						{
							data:[
								{ name :'营销系统', value : data.body.eureka },
								{ name : '生产系统', value : data.body.xtzc },
								{ name : '财务系统', value : data.body.system },
								{ name : '人资系统', value : data.body.config },
								{ name : '物资系统', value : data.body.chart },
								{ name : '数据管理', value : data.body.flow },
								{ name : 'GIS', value : data.body.logger },
								{ name : '其他', value : data.body.qita }
							]
						}
					]
				});
			}
		});
	</script>
</body>
</html>