<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<script src="/chart/js/echarts.common.min.js"></script>
<script src="/chart/resource/jquery/3.1.0/jquery-3.1.0.min.js"></script>
<script src="/chart/js/constants.js" type="text/javascript"></script>
</head>
<body>
	<!-- 为 ECharts 准备一个具备大小（宽高）的 DOM -->
	<div id="main" style="width: 100%; height: 700px;"></div>
	<script type="text/javascript">
		// 基于准备好的dom，初始化echarts实例
		var myChart = echarts.init(document.getElementById('main'));


		

		$.ajax({
			type : "POST",
			url : "/chart/chart/requestPercent/",
			contentType : "application/json",
			dataType : "json",
			beforeSend : function(XHR) {
				myChart.showLoading();
			},
			complete : function(XHR, status) {
				myChart.hideLoading();
			},
			success : function(data) {
				option = {
						backgroundColor : '#2c343c',

						title : {
							text : '服务请求百分比',
							left : 'center',
							top : 20,
							textStyle : {
								color : '#ccc'
							}
						},

						tooltip : {
							trigger : 'item',
							formatter : "{a} <br/>{b} : {c} ({d}%)"
						},

						visualMap : {
							show : false,
							min : 100,
							max : 600,
							inRange : {
								colorLightness : [ 0, 1 ]
							}
						},
						series : [ {
							name : '服务请求百分比',
							type : 'pie',
							radius : '65%',
							center : [ '50%', '50%' ],
							data : data.body.counts.sort(function (a, b) { return a.value - b.value}),
							roseType : 'angle',
							label : {
								normal : {
									textStyle : {
										color : 'rgba(255, 255, 255, 0.3)'
									}
								}
							},
							labelLine : {
								normal : {
									lineStyle : {
										color : 'rgba(255, 255, 255, 0.3)'
									},
									smooth : 0.2,
									length : 10,
									length2 : 20
								}
							},
							itemStyle : {
								normal : {
									color : '#c23531',
									shadowBlur : 200,
									shadowColor : 'rgba(0, 0, 0, 0.5)'
								}
							}
						} ]
					};
				
				myChart.setOption(option);
			}
		});
	</script>
</body>
</html>