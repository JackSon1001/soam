<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<script src="/chart/js/echarts.common.min.js"></script>
	<script src="/chart/resource/jquery/3.1.0/jquery-3.1.0.min.js"></script>
</head>
<body>
	<div id="main" style="width: 600px;height:600px;"></div>
	<script type="text/javascript">
		var myChart = echarts.init(document.getElementById('main'));
		myChart.setOption({
			title : {
				text: 'SOAM系统运行日志',
		        subtext: '真实数据，即时查询',
				x: 'center'
			},
			tooltip: {
				trigger: 'item',
				formatter: "{a} <br/>{b} : {c} ({d}%)"
			},
			legend: {
				orient: 'vertical',
				left: 'left',
				data: ['正常','错误','警告','其他']
			},
			series : [
				{
					name: '日志分类',
					type: 'pie',
					radius : '60%',
					center: ['50%', '50%'],
					data:[
					],
					itemStyle: {
						emphasis: {
							shadowBlur: 10,
							shadowOffsetX: 0,
							shadowColor: 'rgba(0, 0, 0, 0.5)'
						}
					}
				}
			]
		});

		$.ajax({
			type: "GET",
			url: "/chart/log/chart4",
			contentType: "application/json",
			dataType : "json",
			beforeSend : function( XHR ){
				myChart.showLoading();
			},
			complete : function( XHR, status ){
				myChart.hideLoading();
			},
			success: function( data ){
				myChart.setOption({
					series : [
						{
							data:[
								{ value : data.body.info, name:'正常'},
								{ value : data.body.error, name : '错误' },
								{ value : data.body.warn, name : '警告' },
								{ value : data.body.qita, name : '其他' }
							]
						}
					]
				});
			}
		});
	</script>
</body>
</html>