<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<script src="/chart/js/echarts.common.min.js"></script>
	<script src="/chart/resource/jquery/3.1.0/jquery-3.1.0.min.js"></script>
</head>
<body>
    <div id="main" style="width: 100%;height:500px;"></div>
	<script type="text/javascript">
		var myChart = echarts.init(document.getElementById('main'));
		myChart.setOption({
			title: {
				//text: '堆叠区域图'
			},
			backgroundColor: '#eee',
			tooltip : {
				trigger: 'axis',
				axisPointer : {			// 坐标轴指示器，坐标轴触发有效
					type : 'shadow'		// 默认为直线，可选为：'line' | 'shadow'
				}
			},
			toolbox: {
		        feature: {
		            dataView: {show: false, readOnly: false},
		            magicType: {show: false, type: ['line', 'bar']},
		            restore: {show: false},
		            saveAsImage: {show: false}
		        }
		    },
			legend: {
				//orient: 'vertical',
				//left: 'right',
				data: ['总量','SYSTEM', 'EUREKA', 'CONFIG', 'CHART', 'LOGGER', 'XTZC','FLOW', '其他', '请求数']
			},
			grid: {
				left: '3%',
				right: '7%',
				bottom: '3%',
				containLabel: true
			}
		});

		$.ajax({
			type: "GET",
			url: "/chart/log/chart6",
			contentType: "application/json",
			dataType : "json",
			beforeSend : function( XHR ){
				myChart.showLoading();
			},
			complete : function( XHR, status ){
				myChart.hideLoading();
			},
			success: function( data ){
				myChart.setOption({
					xAxis: [{
						type: 'category',
						boundaryGap: true,
						data: data.body.days
					}],
					yAxis: [{
						type: 'value'
					}],
					series: [
					{
						name: 'SYSTEM',
						type: 'bar',
						stack: '总量',
						barWidth : 15,
						areaStyle: { normal: {} },
						label: {
							normal: { show: false, position: 'top' }
						},
						data: data.body.system
					},
					{
						name: 'EUREKA',
						type: 'bar',
						stack: '总量',
						areaStyle: { normal: {} },
						label: {
							normal: { show: false, position: 'top' }
						},
						data: data.body.eureka
					},
					{
						name: 'CONFIG',
						type: 'bar',
						stack: '总量',
						areaStyle: { normal: {} },
						label: {
							normal: { show: false, position: 'top' }
						},
						data: data.body.config
					},
					{
						name: 'CHART',
						type: 'bar',
						stack: '总量',
						areaStyle: { normal: {} },
						label: {
							normal: { show: false, position: 'top' }
						},
						data: data.body.chart
					},
					{
						name: 'LOGGER',
						type: 'bar',
						stack: '总量',
						areaStyle: { normal: {} },
						label: {
							normal: { show: false, position: 'top' }
						},
						data: data.body.logger
					},
					{
						name: 'XTZC',
						type: 'bar',
						stack: '总量',
						label: {
							normal: { show: false, position: 'top' }
						},
						areaStyle: {
							normal: {}
						},
						data: data.body.xtzc
					},
					{
						name: 'FLOW',
						type: 'bar',
						stack: '总量',
						label: {
							normal: { show: false, position: 'top' }
						},
						areaStyle: {
							normal: {}
						},
						data: data.body.flow
					},
					{
						name: '其他',
						type: 'bar',
						stack: '总量',
						areaStyle: { normal: {} },
						label: {
							normal: { show: false, position: 'top' }
						},
						data: data.body.qita
					},
					{
						name: '总量',
						type: 'bar',
						barWidth : 15,
						label: {
							normal: { show: false, position: 'top' }
						},
						areaStyle: {
							normal: {}
						},
						/* markLine : {
			                lineStyle: {
			                    normal: { type: 'dashed' }
			                },
			                data : [
			                    [{type : 'min'}, {type : 'max'}]
			                ]
			            }, */
			            markPoint : {
			                data : [
			                    {type : 'max', name: '最大值'},
			                    {type : 'min', name: '最小值'}
			                ]
			            },
			            markLine : {
			                data : [
			                    {type : 'average', name: '平均值'}
			                ]
			            },
						data: data.body.count
					},
					{
			            name: '请求数',
			            type:'line',
			            markPoint : {
			                data : [
			                    {type : 'max', name: '最大值'}
			                ]
			            },
			            data: data.body.request
			        }
					]
				});
			}
		});
	</script>
</body>
</html>